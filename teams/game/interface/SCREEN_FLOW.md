# 화면 흐름도 (Screen Flow Map)
## Common UI Platform — Navigation Architecture

**문서 버전:** 1.0
**작성일:** 2026-02-20

---

## 전체 네비게이션 구조

```
╔══════════════════════════════════════════════════════════════╗
║                    앱 진입 흐름                               ║
╚══════════════════════════════════════════════════════════════╝

[앱 실행]
    │
    ├─── 최초 설치 ──→ [튜토리얼] ──→ [메인 로비]
    │
    ├─── 재실행 (오프라인 보상 있음) ──→ [오프라인 보상 팝업] ──→ [메인 로비]
    │
    └─── 재실행 (보상 없음) ──→ [메인 로비]
```

---

## 메인 로비 (C-01) — 허브 화면

모든 화면의 중심. 하단 탭바로 주요 5개 섹션 이동.

```
┌─────────────────────────────────────────────────────────────┐
│                        메인 로비                              │
│                                                               │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐             │
│  │ 탭1  │ │ 탭2  │ │ 탭3  │ │ 탭4  │ │ 탭5  │             │
│  │ 홈   │ │카드  │ │업그레│ │프스/│ │상점  │             │
│  │      │ │라이브│ │이드  │ │계통  │ │      │             │
│  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘             │
│      │        │        │        │        │                   │
│      ▼        ▼        ▼        ▼        ▼                   │
│  [로비홈] [카드관리] [업그레이드] [메타진행] [상점]          │
└─────────────────────────────────────────────────────────────┘
```

### 메인 로비에서 진입 가능한 화면

```
[메인 로비 C-01]
    │
    ├─── [메인 액션 버튼] ──→ [런 준비 G-01]
    │         (꿈: 수집하기 / 던전: 런 시작)
    │
    ├─── [상단 알림 벨] ──→ [알림 목록 팝업]
    │
    ├─── [설정 아이콘] ──→ [설정 C-06]
    │
    ├─── [오프라인 수익 배너] ──→ [수집 확인 팝업] ──→ 재화 수령
    │
    └─── [일일 퀘스트 배너] ──→ [퀘스트 목록 C-07]
```

---

## 카드 관련 화면 흐름 (C-02, C-03)

```
[카드 라이브러리 C-02]
    │
    ├─── [카드 탭] ──→ [카드 상세 팝업]
    │         │              │
    │         │         ├─── [업그레이드/강화] ──→ 재화 차감 + 애니메이션
    │         │         └─── [덱에 추가] ──→ [덱 빌더 C-03] 자동 이동 여부 물어봄
    │         │
    ├─── [덱 빌더 탭] ──→ [덱 빌더 C-03]
    │
    └─── [필터/정렬 변경] ──→ 동일 화면 갱신

[덱 빌더 C-03]
    │
    ├─── [카드 탭] ──→ [카드 상세 팝업] ──→ 덱에 추가/제거
    │
    ├─── [덱에서 카드 탭] ──→ 덱에서 제거
    │
    ├─── [덱 저장] ──→ 저장 완료 토스트 메시지
    │
    └─── [← 뒤로] ──→ [메인 로비 C-01]
```

---

## 업그레이드 화면 흐름 (C-04)

```
[업그레이드 트리 C-04]
    │
    ├─── [노드 탭] ──→ [노드 상세 팝업]
    │         │              │
    │         │         ├─── [업그레이드] ──→ 재화 차감 + 파티클 애니
    │         │         └─── [잠금 해제 조건 확인] (잠긴 노드)
    │         │
    └─── [탭: 속도/덱/방치/특수] ──→ 트리 카테고리 전환

※ 게임별 트리 이름:
   꿈 수집가: [방치속도] [덱확장] [프레스티지보너스] [특수능력]
   던전 기생충: [기생체계통] [시작숙주] [영구업그레이드] [어센션]
```

---

## 상점 화면 흐름 (C-05)

```
[상점 C-05]
    │
    ├─── [패키지 탭]
    │         │
    │         └─── [패키지 탭] ──→ [구매 확인 팝업] ──→ [결제 처리]
    │                                                         │
    │                                              ├─── 성공: [구매 완료 팝업 + 보상]
    │                                              └─── 실패: [결제 오류 팝업]
    │
    ├─── [카드팩 탭]
    │         │
    │         └─── [카드팩 선택] ──→ [구매 확인] ──→ [팩 오픈 애니메이션] ──→ [카드 획득 팝업]
    │
    ├─── [꾸미기 탭]
    │         │
    │         └─── [스킨 선택] ──→ [미리보기] ──→ [구매 확인]
    │
    └─── [광고제거 배너] ──→ [구매 확인] ──→ [결제 처리]
```

---

## 런 흐름 — 꿈 수집가 (Game-Specific)

```
[메인 로비] ──[수집하기]──→ [오프라인 보상 수령] ──→ [런 준비 G-01]
                                                           │
                                              [몽상가 선택 + 덱 확인]
                                                           │
                                                  [런 시작 확인 팝업]
                                                           │
                                                   [꿈 런 화면 G-02]
                                                  (자동 진행 애니메이션)
                                                           │
                                              ┌────────────┴────────────┐
                                              │    이벤트 발생 (20%)     │
                                              │  [이벤트 팝업 G-04]      │
                                              │  [선택 A] 또는 [선택 B] │
                                              └────────────┬────────────┘
                                                           │
                                              ┌────────────┴────────────┐
                                              │  런 완료 (성공/실패)     │
                                              │  [런 완료 화면 G-03]     │
                                              │  [보상 목록 표시]        │
                                              │  [수집] 버튼             │
                                              └────────────┬────────────┘
                                                           │
                                                  [메인 로비 C-01]
```

---

## 런 흐름 — 던전 기생충 (Game-Specific)

```
[메인 로비] ──[런 시작]──→ [계통 선택 G-01]
                               │
                          [어센션 레벨 선택]
                               │
                          [런 시작 확인 팝업]
                               │
                        [던전 맵 화면] ──→ 층 선택 (분기)
                               │
                    ┌──────────┼──────────┐
                    ▼          ▼          ▼
               [전투 G-02] [이벤트]  [상점]
                    │          │          │
              [전투 진행]  [선택지]   [카드/물약 구매]
                    │          │          │
                    └──────────┴──────────┘
                               │
                       [층 완료 → 보상 G-03]
                        [카드 3장 중 1장 선택]
                        [숙주 소비/유지 결정]
                               │
                      [다음 층 or 보스]
                               │
                    ┌──────────┴──────────┐
                    ▼                     ▼
              [런 클리어]           [게임 오버]
          [메타 진행 획득]       [DNA 일부 획득]
                    │                     │
                    └──────────┬──────────┘
                               │
                    [런 결과 화면 G-03]
                    [DNA 포인트 획득 표시]
                    [업적 달성 여부 표시]
                               │
                    [메인 로비 C-01]
```

---

## 설정 화면 흐름 (C-06)

```
[설정 C-06]
    │
    ├─── [사운드 설정] ──→ BGM 볼륨 / 효과음 볼륨 슬라이더
    │
    ├─── [알림 설정] ──→ 오프라인 보상 알림 / 이벤트 알림 토글
    │
    ├─── [언어 설정] ──→ 언어 선택 목록 ──→ 앱 즉시 재언어 적용
    │
    ├─── [접근성] ──→ 텍스트 크기 / 색맹 모드 / 햅틱 피드백
    │
    ├─── [계정]
    │         ├─── [Google Play / iCloud 연동] ──→ OAuth 흐름
    │         └─── [게스트 → 계정 전환 안내]
    │
    ├─── [개인정보처리방침] ──→ 외부 브라우저
    ├─── [이용약관] ──→ 외부 브라우저
    └─── [버전 정보] ──→ 앱 버전 표시
```

---

## 화면 전환 규칙

| 전환 유형 | 애니메이션 | 방향 |
|----------|-----------|------|
| 탭 전환 (하단 탭) | Fade | — |
| 하위 화면 진입 (push) | Slide | 우→좌 |
| 하위 화면 복귀 (pop) | Slide | 좌→우 |
| 팝업 등장 | Scale + Fade | 아래→위 (spring) |
| 팝업 닫기 | Fade | — |
| 런 시작 | Full screen fade | 검정→게임 |
| 런 종료 | Full screen fade | 게임→결과 |

---

## 딥링크 구조 (Push Notification 연동)

| 알림 유형 | 딥링크 경로 | 진입 화면 |
|----------|-----------|---------|
| 오프라인 보상 준비 | `app://lobby?collect=true` | 메인 로비 + 수집 팝업 |
| 일일 퀘스트 갱신 | `app://quest` | 퀘스트 화면 |
| 한정 상점 이벤트 | `app://shop?tab=event` | 상점 이벤트 탭 |
| 시즌 패스 만료 | `app://shop?tab=pass` | 상점 배틀패스 탭 |

---

_Screen Flow v1.0 | GeekBrox 게임팀 | 2026-02-20_
